<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memory Card Game</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Telegram Mini Apps Analytics SDK -->
  <script 
    async 
    src="https://tganalytics.xyz/index.js" 
    onload="initAnalytics()" 
    type="text/javascript"
  ></script>
  <script>
    function initAnalytics() {
      window.telegramAnalytics.init({
        token: 'NEW_TOKEN_HERE', // Replace with the token from @DataChief_bot using https://memory-flip-game-5ftyln5lu-moopandas-projects.vercel.app
        appName: 'memoryflipgame',
      });
      window.telegramAnalytics.track('app_launch');
    }
  </script>
  <!-- Monetag SDK Integration -->
  <script src='//whephiwums.com/sdk.js' data-zone='9069289' data-sdk='show_9069289'></script>
  <!-- TON Connect UI Library -->
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <!-- Telegram Web App Script -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- Loading Screen with Background -->
  <div id="loading-screen">
    <div class="loading-container">
      <div class="loading-text">Loading...</div>
      <div class="loading-bar">
        <div class="loading-progress" id="loading-progress"></div>
      </div>
    </div>
  </div>

  <!-- Start Screen -->
  <div id="start-screen">
    <button id="start-button">START</button>
    <button id="wallet-button">
      <span class="wallet-text">Test Wallet</span>
    </button>
    <p id="wallet-status">Wallet not connected</p>
  </div>

  <!-- Game Container -->
  <div class="game-container" id="game-container">
    <!-- Header -->
    <div class="header">
      <div class="lives">
        <img src="public/heart.png" alt="Life">
        <span id="lives">5</span>
      </div>
      <div class="coins">
        <img src="public/coin.png" alt="Coins">
        <span id="coins">0</span>
      </div>
      <div class="timer">
        <img src="public/timer.png" alt="Time">
        <span id="timer">30</span>s
      </div>
    </div>

    <!-- Card Grid -->
    <div class="card-grid" id="cardGrid"></div>

    <!-- Hint Text -->
    <div class="hint-container" id="game-hint">
      <h3 class="hint-title">How to Play</h3>
      <ul class="hint-list">
        <li><span class="hint-icon">üé¥</span> Flip matching cards to win coins.</li>
        <li><span class="hint-icon">üì∫</span> Watch ads to play again.</li>
        <li><span class="hint-icon">‚è±Ô∏è</span> Flip all cards within time for +500 coins.</li>
      </ul>
    </div>
  </div>

  <!-- Pop-Ups -->
  <div id="win-popup" class="popup">
    <div class="popup-content">
      <h2>You Win! üéâ</h2>
      <p>Congratulations! You've matched all the cards.</p>
      <button id="close-popup">Close</button>
    </div>
  </div>

  <div id="lose-popup" class="popup">
    <div class="popup-content">
      <h2>Time's Up! ‚åõ</h2>
      <p>Better luck next time.</p>
      <div class="button-container">
        <button id="continue-button">Continue</button>
        <button id="next-button">Next</button>
      </div>
    </div>
  </div>

  <div id="no-lives-popup" class="popup">
    <div class="popup-content">
      <h2>All Lives Used Up! üïí</h2>
      <p>Wait 3 hours to play again.</p>
      <span id="countdown-timer">03:00:00</span>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>